
import com.lowagie.text.Document;
import com.lowagie.text.Paragraph;
import com.lowagie.text.pdf.PdfWriter;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.List;

@Service
public class EmployeeServiceImpl implements EmployeeService {

    @Autowired
    private EmployeeRepository employeeRepository;

    @Override
    public String generateAndStoreEmployeeReport() {
        List<Employee> employees = employeeRepository.findAll();
        Document document = new Document();

        // Specify the directory and file name where you want to store the PDF
        String directoryPath = "/path/to/directory";  // Change this path as needed
        String fileName = "Employee_Report.pdf";
        String fullPath = directoryPath + File.separator + fileName;

        try {
            // Ensure the directory exists or create it
            File directory = new File(directoryPath);
            if (!directory.exists()) {
                directory.mkdirs();  // Create the directory if it doesn't exist
            }

            // Create a FileOutputStream to write the PDF to the specified location
            FileOutputStream out = new FileOutputStream(fullPath);
            PdfWriter.getInstance(document, out);

            document.open();
            document.add(new Paragraph("Employee Report"));
            document.add(new Paragraph(" "));  // Blank line

            for (Employee emp : employees) {
                document.add(new Paragraph("ID: " + emp.getId()));
                document.add(new Paragraph("Name: " + emp.getName()));
                document.add(new Paragraph("Department: " + emp.getDepartment()));
                document.add(new Paragraph("Salary: $" + emp.getSalary()));
                document.add(new Paragraph(" "));  // Blank line
            }

            document.close();
            out.close();
            return "PDF stored at: " + fullPath;

        } catch (IOException e) {
            e.printStackTrace();
            return "Error generating PDF: " + e.getMessage();
        }
    }
}
===================
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/api/pdf")
public class EmployeeController {

    @Autowired
    private EmployeeService employeeService;

    @GetMapping("/generate")
    public String generateAndStorePdf() {
        return employeeService.generateAndStoreEmployeeReport();
    }
}
